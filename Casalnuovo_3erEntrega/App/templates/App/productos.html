{% extends "App/base.html" %}
{% load static %}

{% block main %}
<section id="productos" class="menu-cart scroll-reveal">
    <div class="container">
        <!-- Botón para la búsqueda de productos -->
        <div class="busqueda-btn-container">
            <a href="{% url 'buscar_producto' %}" class="btn btn-primary">
                ¿Qué estás buscando?
            </a>
        </div>

        <h1 class="header-txt">Productos</h1>
        <div class="divider"></div>

        <div class="tabs-content" data-tabs-content="example-tabs">
            <div class="tabs-panel is-active" id="panel1">
                <div class="menu-content">
                    <div class="menu-section">
                        <table>
                            <!-- Cabecera de la tabla -->
                            <tr>
                                <th>Descripción</th>
                                {% if user.is_authenticated %}
                                    <th>SKU</th>
                                    <th>Precio</th>
                                    <th>Stock</th>
                                    <th>Acciones</th>
                                {% endif %}
                            </tr>

                            {% for producto in productos %}
                            <tr>
                                <td>{{ producto.descripcion }}</td>

                                {% if user.is_authenticated %}
                                    <td>{{ producto.sku }}</td>
                                    <td>${{ producto.precio }}</td>
                                    <td>{{ producto.stock }}</td>
                                    <td>
                                        <div style="display: flex; justify-content: space-between; gap: 10px;">
                                            <!-- Botón para ver detalles -->
                                            <a href="{% url 'producto_detail' sku=producto.sku %}" class="btn btn-info" title="Ver Detalles">
                                                Ver Detalles
                                            </a>
                                            <!-- Botón para actualizar -->
                                            <a href="{% url 'producto_update' sku=producto.sku %}" class="btn btn-secondary" title="Actualizar Producto">
                                                Actualizar Producto
                                            </a>
                                            <!-- Botón para eliminar -->
                                            <a href="{% url 'producto_delete' sku=producto.sku %}" class="btn btn-danger" title="Eliminar Producto">
                                                Eliminar Producto
                                            </a>
                                        </div>
                                    </td>
                                {% endif %}
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5">No hay productos disponibles.</td>
                            </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Botón para redirigir al formulario de productos fuera de stock -->
<a href="{% url 'formulario_prodsinstock' %}" class="btn btn-secondary">
    ¿No encontraste lo que querías? Déjanos lo que necesitas y nos pondremos en contacto con vos.
</a>

{% endblock %}

